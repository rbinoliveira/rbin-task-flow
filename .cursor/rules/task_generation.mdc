---
description: Direct task generation from tasks.input.txt - be efficient and direct
globs: .task-flow/tasks.input.txt, .task-flow/.internal/tasks.json, .task-flow/.internal/status.json
alwaysApply: true
---

- **Task Generation - Direct and Efficient:**
  - When user asks to "Read tasks.input.txt and generate detailed subtasks updating task status":
    - **READ ONLY**: `.task-flow/tasks.input.txt`
    - **GENERATE**: Two JSON files and one markdown file with the exact structure below
    - **SAVE**: All files to `.task-flow/`
    - **DON'T**: Read other files, check existing JSONs, explore codebase, or ask questions

- **Required Actions:**
  1. Read `tasks.input.txt` (ignore comments, only process lines starting with `- `)
  2. For each task line, create a task with sequential ID starting at 1
  3. Generate 3-8 subtasks per task with:
     - Clear title
     - Brief description
     - Step-by-step instructions (3-5 steps)
  4. Create `.task-flow/.internal/tasks.json` with structure below
  5. Create `.task-flow/.internal/status.json` with all tasks/subtasks as "pending"
  6. Create `.task-flow/tasks.status.md` with all tasks and subtasks marked as `- [ ]` (pending)
  7. Write all three files immediately

- **tasks.json Structure:**
  ```json
  {
    "tasks": [
      {
        "id": 1,
        "title": "Task Title",
        "description": "Task description",
        "originalRequest": "- Task description from tasks.input.txt",
        "createdAt": "ISO 8601 timestamp",
        "subtasks": [
          {
            "id": 1,
            "title": "Subtask Title",
            "description": "What this subtask does",
            "instructions": "Step 1: Action\nStep 2: Action\nStep 3: Verify"
          }
        ]
      }
    ]
  }
  ```

- **status.json Structure:**
  ```json
  {
    "tasks": {
      "1": {
        "status": "pending",
        "subtasks": {
          "1": "pending",
          "2": "pending"
        }
      }
    }
  }
  ```

- **tasks.status.md Structure:**
  ```markdown
  # Task Status

  <!-- âš ï¸ AVISO: Este arquivo Ã© atualizado automaticamente pela IA. NÃƒO edite manualmente. -->

  ## ðŸ“Š Resumo

  - âœ… **Tasks Completas**: 0
  - â³ **Tasks em Andamento**: 2
  - ðŸ“ **Subtasks Restantes**: 8

  **Tasks:**
  - âœ… Task 1: First task (completa)
  - â³ Task 2: Second task (3 subtasks restantes de 5)

  ---

  ## Tasks

  - [x] First task

    - [x] Subtask Title 1
    - [x] Subtask Title 2

  - [ ] Second task

    - [x] Subtask Title 1
    - [ ] Subtask Title 2
    - [ ] Subtask Title 3
  ```
  - **ALWAYS include summary section** at the top with:
    - âœ… Tasks completas (all subtasks done)
    - â³ Tasks em andamento (some subtasks done)
    - ðŸ“ Total de subtasks restantes
    - Lista de tasks com status e quantas subtasks faltam
  - All tasks and subtasks start as `- [ ]` (pending)
  - Format: Task title with `- [ ]` or `- [x]`, then subtasks indented with `  - [ ]` or `  - [x]`
  - **CRITICAL**: Always regenerate summary when updating tasks.status.md

- **Example:**
  - Input (`tasks.input.txt`): `- Create authentication system`
  - Output: Task with ID 1, 5 subtasks (setup database, create models, implement login, add JWT, test)

- **Critical Rules:**
  - âœ… Be direct: Read â†’ Generate â†’ Save
  - âœ… No unnecessary file reads
  - âœ… No exploration of codebase
  - âœ… No questions - just generate
  - âœ… Use current timestamp for `createdAt`
  - âœ… All statuses start as "pending"
  - âœ… Subtask IDs are sequential per task (1, 2, 3...)

- **Principle:**
  > **When generating tasks, be fast and direct. Read tasks.input.txt, generate JSONs and tasks.status.md with proper structure, save files. No exploration needed.**
