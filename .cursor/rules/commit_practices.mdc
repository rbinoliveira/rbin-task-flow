---
description: Pr√°ticas de commit ap√≥s conclus√£o de tarefas e subtarefas, incluindo sugest√µes autom√°ticas de mensagens
globs: **/*
alwaysApply: true
---

- **Notifica√ß√£o e Sugest√£o de Commit Ap√≥s Tarefas:**
  - **Sempre avisar o usu√°rio** quando uma task ou subtask for marcada como `done`
  - **Sugerir uma mensagem de commit** baseada nas mudan√ßas realizadas
  - **Incluir contexto** da task/subtask na sugest√£o de commit
  - **CR√çTICO: NUNCA executar comandos git** - apenas sugerir, o usu√°rio executa

- **Quando Aplicar:**
  - Ap√≥s `set_task_status` com status `done` para qualquer task ou subtask
  - Ap√≥s implementa√ß√£o completa de uma subtask
  - Ap√≥s conclus√£o de uma task pai (quando todas subtasks estiverem done)

- **Formato da Sugest√£o de Commit:**
  ```bash
  # ‚úÖ DO: Formato recomendado
  git commit -m "feat(module): Descri√ß√£o curta da mudan√ßa
  
  - Detalhes da implementa√ß√£o
  - Task/Subtask ID: X.Y
  - Mudan√ßas principais realizadas"
  
  # Exemplo real:
  git commit -m "feat(auth): Implement user login validation
  
  - Add email format validation
  - Add password strength checks
  - Task ID: 3.2"
  ```

- **Processo de Sugest√£o:**
  1. **Analisar mudan√ßas**: Usar `git status` e `git diff` para identificar arquivos modificados (apenas leitura, nunca modificar)
  2. **Extrair contexto da task**: Incluir ID da task/subtask e t√≠tulo/descri√ß√£o
  3. **Gerar mensagem**: Criar mensagem seguindo conventional commits
  4. **Apresentar ao usu√°rio**: Mostrar sugest√£o formatada e pronta para uso
  5. **NUNCA executar**: Apenas sugerir, o usu√°rio decide quando e como fazer o commit

- **Tipos de Commit (Conventional Commits):**
  - `feat`: Nova funcionalidade (task completa)
  - `fix`: Corre√ß√£o de bug
  - `refactor`: Refatora√ß√£o sem mudan√ßa de comportamento
  - `docs`: Mudan√ßas em documenta√ß√£o
  - `style`: Formata√ß√£o, ponto e v√≠rgula, etc (sem mudan√ßa de c√≥digo)
  - `test`: Adi√ß√£o ou corre√ß√£o de testes
  - `chore`: Mudan√ßas em build, depend√™ncias, etc

- **Estrutura da Mensagem Sugerida:**
  ```bash
  <tipo>(<escopo>): <descri√ß√£o curta>
  
  <corpo opcional com detalhes>
  - Task/Subtask: <ID>
  - Arquivos modificados: <lista resumida>
  ```

- **Exemplos de Sugest√µes:**
  
  **Para subtask de implementa√ß√£o:**
  ```bash
  git commit -m "feat(api): Add user authentication endpoint
  
  - Implement POST /api/auth/login
  - Add JWT token generation
  - Add input validation middleware
  - Subtask ID: 5.3"
  ```
  
  **Para task completa:**
  ```bash
  git commit -m "feat(dashboard): Complete user analytics dashboard
  
  - Add real-time metrics display
  - Implement chart visualizations
  - Add data export functionality
  - Task ID: 7"
  ```
  
  **Para corre√ß√£o:**
  ```bash
  git commit -m "fix(auth): Resolve token expiration issue
  
  - Fix JWT refresh logic
  - Update token validation
  - Subtask ID: 8.1"
  ```

- **Comandos √öteis para An√°lise:**
  - `git status --short` - Lista arquivos modificados de forma compacta
  - `git diff --stat` - Estat√≠sticas de mudan√ßas
  - `git diff --name-only` - Apenas nomes dos arquivos modificados
  - `git log --oneline -5` - √öltimos commits para contexto

- **Quando N√ÉO Sugerir Commit:**
  - ‚ùå DON'T: Se n√£o houver mudan√ßas no git (nenhum arquivo modificado)
  - ‚ùå DON'T: Se o usu√°rio j√° fez commit recentemente (√∫ltimos 5 minutos)
  - ‚ùå DON'T: Se houver conflitos de merge n√£o resolvidos
  - ‚ùå DON'T: Se o reposit√≥rio n√£o for um git repo

- **Apresenta√ß√£o da Sugest√£o:**
  - **Sempre notificar o usu√°rio** quando uma task/subtask for conclu√≠da com mensagem clara e emoji ‚úÖ
  - **Mostrar sugest√£o formatada** pronta para copiar/colar
  - **Incluir estat√≠sticas** das mudan√ßas (arquivos modificados, linhas adicionadas/removidas)
  
  **Exemplo de apresenta√ß√£o:**
  ```markdown
  ‚úÖ Task 3.2 conclu√≠da!
  
  üìù Sugest√£o de commit:
  ```bash
  git commit -m "feat(module): Descri√ß√£o da mudan√ßa
  
  - Detalhe 1
  - Detalhe 2
  - Task ID: 3.2"
  ```
  
  üìä Mudan√ßas detectadas:
  - 3 arquivos modificados
  - 45 linhas adicionadas, 12 removidas
  ```

- **Integra√ß√£o com Rubinho Task Flow:**
  - Ap√≥s marcar uma task como conclu√≠da, automaticamente:
    1. Verificar se h√° mudan√ßas no git
    2. Analisar arquivos modificados
    3. Gerar sugest√£o de commit baseada na task
    4. Apresentar ao usu√°rio de forma clara

- **Controle Git:**
  - **NUNCA executar comandos git** - apenas sugerir
  - Seguir [git_control.mdc](mdc:.cursor/rules/git_control.mdc) para controle total do usu√°rio sobre git
  - Apresentar sugest√µes prontas para o usu√°rio copiar e executar

- **Refer√™ncias:**
  - Seguir padr√µes de [Conventional Commits](https://www.conventionalcommits.org/)
  - Integrar com workflow do Rubinho Task Flow
  - Controle git: [git_control.mdc](mdc:.cursor/rules/git_control.mdc)
