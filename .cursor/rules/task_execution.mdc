---
description: Task management workflow with RBIN Task Flow
globs: **/*
alwaysApply: true
---

- **RBIN Task Flow - AI-Powered Task Management:**
  - This project uses **RBIN Task Flow** for task tracking and management
  - **IMPORTANT**: When user mentions "task flow", they always refer to **RBIN Task Flow**
  - Tasks are defined in plain text: `.task-flow/tasks.input.txt`
  - Task data is stored in: `.task-flow/.internal/` (do not edit directly - internal system files)
  - Task files: `.internal/tasks.json` (definitions), `.internal/status.json` (progress tracking), and `tasks.status.md` (human-readable status)

- **Task Definition:**
  - Edit `.task-flow/tasks.input.txt` to define tasks
  - Use simple format: `- Task description` (no [ ] needed)
  - AI will generate detailed subtasks from descriptions
  - Keep descriptions clear and actionable

- **AI Commands:**
  - `task-flow: sync` - Sync new tasks from tasks.input.txt
  - `task-flow: think` - Analyze codebase and suggest new tasks
  - `task-flow: run next X` - Work on next X subtasks sequentially
  - `task-flow: run task X` - Work on all pending subtasks of task X
  - `task-flow: status` - Show current task status
  - `task-flow: review` - Review completed tasks
  - `task-flow: refactor` - Refactor code from current commit

- **Workflow Example:**
  ```markdown
  1. Add tasks to `.task-flow/tasks.input.txt`:
     - Implement user authentication
     - Add database migrations
     - Create API endpoints

  2. Use AI command: task-flow: sync (generates detailed subtasks)
  3. Use AI command: task-flow: status (view all tasks and progress)
  4. Use AI command: task-flow: run next X (work on next X subtasks)
  5. Tasks are automatically marked as done when completed
  6. Use AI command: task-flow: review (verify completed tasks)
  ```

- **Commit Workflow:**
  - After completing tasks, follow [commit_practices.mdc](mdc:.cursor/rules/commit_practices.mdc)
  - Never execute git commands directly - follow [git_control.mdc](mdc:.cursor/rules/git_control.mdc)
  - Suggest commits with descriptive messages referencing completed tasks

- **Commit Message Format:**
  ```bash
  git add .
  git commit -m "feat(module): Complete tasks from RBIN Task Flow

  - Task 1: [description]
  - Task 2: [description]

  Completed via RBIN Task Flow"
  ```

- **Integration with Other Rules:**
  - Follow [commit_practices.mdc](mdc:.cursor/rules/commit_practices.mdc) for commit format
  - Follow [git_control.mdc](mdc:.cursor/rules/git_control.mdc) - NEVER execute git, only suggest
  - See `CLAUDE.md` for complete RBIN Task Flow documentation
  - See `README.md` for installation and setup instructions

- **Best Practices:**
  - Keep task descriptions concise but clear
  - Let AI generate detailed implementation steps
  - Review generated subtasks before starting work
  - Update task status regularly through the menu
  - Commit work frequently referencing task progress

- **Task Generation:**
  - See [task_generation.mdc](mdc:.cursor/rules/task_generation.mdc) for direct task generation rules
  - When generating tasks, be efficient: read tasks.input.txt, generate JSONs, save files
  - No need to explore codebase or read other files

- **Task Analysis:**
  - See [task_analysis.mdc](mdc:.cursor/rules/task_analysis.mdc) for analyzing codebase to suggest new tasks
  - When user asks to analyze for new tasks, intelligently scan codebase and suggest additions

- **Simplified Task Work:**
  - See [task_work.mdc](mdc:.cursor/rules/task_work.mdc) for simplified "do next X subtasks" commands
  - When user says "faça as próximas X subtasks", automatically find and implement them

- **Task Review:**
  - See [task_review.mdc](mdc:.cursor/rules/task_review.mdc) for reviewing completed tasks
  - When user says "task-flow: review", verify if completed tasks are actually done

- **Task Refactor:**
  - See [task_refactor.mdc](mdc:.cursor/rules/task_refactor.mdc) for refactoring code from current commit
  - When user says "task-flow: refactor", improve code quality without changing functionality

- **Task Flow Commands - Natural Language Interpretation:**
  - **CRITICAL**: When user mentions **"task flow"**, they **ALWAYS** refer to **RBIN Task Flow**
  - Common phrases that mean "work on RBIN Task Flow subtasks":
    - "trabalhe nas próximas x subtasks do task flow"
    - "work on next x subtasks from task flow"
    - "próximas subtasks do task flow"
    - "task flow subtasks"
    - Any variation mentioning "task flow" + "subtasks"

- **When User Asks to Work on Subtasks:**
  - **STEP 1**: Read `.task-flow/.internal/tasks.json` and `.task-flow/.internal/status.json`
  - **STEP 2**: Find next X pending subtasks in sequential order:
    - Order: Task 1 → Subtask 1, 2, 3... → Task 2 → Subtask 1, 2, 3...
    - Only count subtasks with status "pending"
    - Skip subtasks already "done" or "in_progress"
  - **STEP 3**: For each subtask:
    - Read instructions from `.internal/tasks.json`
    - Implement following step-by-step instructions
    - After completion: Update `.internal/status.json` (subtask → "done") and `tasks.status.md` (mark as `- [x]`)
  - **STEP 4**: If all subtasks of a task are done, update task status to "done" in both files

- **Example:**
  - User: "trabalhe nas próximas 3 subtasks do task flow"
  - Interpretation: Work on next 3 pending subtasks from RBIN Task Flow
  - Action:
    1. Read `.task-flow/.internal/tasks.json` and `.task-flow/.internal/status.json`
    2. Find first 3 pending subtasks (e.g., 1.1, 1.2, 1.3 if all pending)
    3. Work on 1.1 → mark done in .internal/status.json and tasks.status.md → work on 1.2 → mark done → work on 1.3 → mark done
    4. Update both .internal/status.json and tasks.status.md after each completion

- **Principle:**
  > **Use RBIN Task Flow's AI commands for all task management. Define tasks in plain text, let AI generate details, track progress through tasks.status.md, and commit work with descriptive messages.**
